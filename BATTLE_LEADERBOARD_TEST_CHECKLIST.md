# 🧪 Battle Leaderboard - 本地测试清单

## 📋 测试步骤

### 1. 访问页面
- [ ] 打开浏览器访问：`http://localhost:5173/battle/leaderboard`
- [ ] 检查页面是否正常加载
- [ ] 检查是否有控制台错误

### 2. Hero 区域测试
- [ ] Hero 标题和副标题显示正常
- [ ] "My Profile" 按钮（如果已登录）可点击
- [ ] "Create Match" 按钮可点击并跳转到 Battle 页面
- [ ] 背景渐变和动画效果正常

### 3. Top 3 领奖台测试
- [ ] 前三名玩家正确显示（如果有数据）
- [ ] 🥇 第一名有金色特效
- [ ] 🥈 第二名有银色特效
- [ ] 🥉 第三名有铜色特效
- [ ] 玩家头像显示正常（或显示默认图标 🎱）
- [ ] 段位徽章显示正确
- [ ] 星数显示正确
- [ ] Elo、排名、胜场数显示正确
- [ ] 如果没有前三名，显示 "No player"

### 4. 搜索功能测试
- [ ] 在搜索框输入玩家名称
- [ ] 搜索结果实时更新
- [ ] 搜索不区分大小写
- [ ] 清空搜索后显示所有玩家

### 5. 排序功能测试
- [ ] 切换到 "Sort by Rank" - 按排名排序
- [ ] 切换到 "Sort by Elo" - 按 Elo 降序排序
- [ ] 切换到 "Sort by Wins" - 按胜场降序排序
- [ ] 切换到 "Sort by Win Rate" - 按胜率降序排序
- [ ] 排序后列表正确更新

### 6. 筛选功能测试
- [ ] 选择 "All Tiers" - 显示所有段位
- [ ] 选择 "Bronze" - 只显示 Bronze 段位玩家
- [ ] 选择 "Silver" - 只显示 Silver 段位玩家
- [ ] 选择 "Gold" - 只显示 Gold 段位玩家
- [ ] 选择 "Platinum" - 只显示 Platinum 段位玩家
- [ ] 选择 "Diamond" - 只显示 Diamond 段位玩家
- [ ] 选择 "Master" - 只显示 Master 段位玩家
- [ ] 选择 "Grand Master+" - 只显示 Grand Master 及以上段位

### 7. 排行榜列表测试（桌面端）
- [ ] 表格头部显示所有列：Rank, Avatar, Name, Tier, Elo, Wins, Win Rate, Streak
- [ ] 玩家数据正确显示在对应列中
- [ ] 当前用户行有高亮显示（蓝色背景）
- [ ] 点击玩家行可以查看详情（如果已实现）
- [ ] 段位徽章颜色正确
- [ ] 连胜显示 🔥，连败显示 ❄️

### 8. 排行榜列表测试（移动端）
- [ ] 切换到移动端视图（< 1024px）
- [ ] 显示卡片布局而不是表格
- [ ] 每个卡片显示：排名、头像、名称、段位、Elo、胜场、胜率、连胜
- [ ] 卡片可点击
- [ ] 当前用户卡片有高亮显示

### 9. 响应式设计测试
- [ ] 桌面端（> 1024px）：显示表格布局
- [ ] 平板端（768px - 1024px）：显示卡片布局
- [ ] 移动端（< 768px）：显示卡片布局，Top 3 垂直排列
- [ ] 所有断点下布局正常，无溢出

### 10. 数据加载测试
- [ ] 页面加载时显示 Loading 状态
- [ ] 数据加载完成后显示排行榜
- [ ] 如果没有数据，显示 "No players found"
- [ ] 检查浏览器控制台是否有错误

### 11. 实时更新测试（如果已启用）
- [ ] 在另一个浏览器标签页完成一场 Battle 比赛
- [ ] 检查排行榜是否自动更新排名和 Elo
- [ ] 检查 Top 3 是否自动更新

### 12. 导航测试
- [ ] 从 Battle 页面点击 "Leaderboard" 按钮
- [ ] 正确跳转到排行榜页面
- [ ] 浏览器返回按钮正常工作
- [ ] 直接访问 `/battle/leaderboard` URL 正常工作

### 13. 边界情况测试
- [ ] 测试没有 Battle 数据的用户（battle_elo_rating = 0 或 null）
- [ ] 测试玩家没有头像的情况（显示默认图标）
- [ ] 测试玩家没有段位的情况（显示 "Unranked"）
- [ ] 测试搜索无结果的情况
- [ ] 测试筛选无结果的情况

### 14. 性能测试
- [ ] 页面加载速度正常（< 2秒）
- [ ] 搜索响应迅速（< 100ms）
- [ ] 排序响应迅速（< 100ms）
- [ ] 筛选响应迅速（< 100ms）
- [ ] 滚动流畅，无卡顿

## 🐛 常见问题排查

### 问题 1: 页面空白
- 检查浏览器控制台是否有错误
- 检查网络请求是否成功
- 检查 Supabase 连接是否正常

### 问题 2: 数据不显示
- 检查数据库中是否有 Battle 数据
- 检查 `battle_elo_rating > 0` 条件
- 检查 RLS 策略是否允许读取

### 问题 3: 样式错乱
- 检查 CSS 是否正确加载
- 检查是否有样式冲突
- 清除浏览器缓存

### 问题 4: 实时更新不工作
- 检查 Supabase Realtime 是否启用
- 检查订阅是否正确建立
- 检查浏览器控制台是否有错误

## ✅ 测试完成标准

- [ ] 所有功能测试通过
- [ ] 无控制台错误
- [ ] 响应式设计正常
- [ ] 性能满足要求
- [ ] 用户体验良好

## 📝 测试结果记录

**测试日期**: _______________

**测试人员**: _______________

**发现的问题**:
1. 
2. 
3. 

**修复状态**:
- [ ] 所有问题已修复
- [ ] 部分问题待修复
- [ ] 需要进一步调查
