# ğŸ“… Tournament Calendar Redesign - è®¾è®¡æ–¹æ¡ˆ

## ğŸ¯ è®¾è®¡ç›®æ ‡

å°†å½“å‰çš„å¡ç‰‡å¼ Tournament é¡µé¢æ”¹é€ æˆ**å¤§æ—¥å†è§†å›¾**ï¼Œè®©é€‰æ‰‹å¯ä»¥ï¼š
- âœ… ä¸€çœ¼çœ‹åˆ°æ¯å¤©çš„æ¯”èµ›å’Œæ´»åŠ¨
- âœ… å¿«é€ŸæŠ¥å/å–æ¶ˆæŠ¥å
- âœ… æŸ¥çœ‹æŠ¥åäººæ•°å’ŒæŠ¥ååå•
- âœ… è‡ªåŠ¨æ˜¾ç¤ºæ¯å‘¨å››çš„å‘¨èµ›å’Œæ¯å‘¨æ—¥çš„å­¦ç”Ÿèµ›

---

## ğŸ“ UI/UX è®¾è®¡æ–¹æ¡ˆ

### **æ•´ä½“å¸ƒå±€ç»“æ„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† Tournaments & Events Calendar                            â”‚
â”‚  [ç®¡ç†å‘˜æŒ‰é’®: + Add Event]                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â† Prev Month]  [December 2024]  [Next Month â†’]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Sun    Mon    Tue    Wed    Thu    Fri    Sat              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”          â”‚
â”‚  â”‚ 1  â”‚ â”‚ 2  â”‚ â”‚ 3  â”‚ â”‚ 4  â”‚ â”‚ 5  â”‚ â”‚ 6  â”‚ â”‚ 7  â”‚          â”‚
â”‚  â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚ğŸ†  â”‚ â”‚    â”‚ â”‚    â”‚          â”‚
â”‚  â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚å‘¨èµ› â”‚ â”‚    â”‚ â”‚    â”‚          â”‚
â”‚  â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚ğŸ‘¥8 â”‚ â”‚    â”‚ â”‚    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”          â”‚
â”‚  â”‚ 8  â”‚ â”‚ 9  â”‚ â”‚10  â”‚ â”‚11  â”‚ â”‚12  â”‚ â”‚13  â”‚ â”‚14  â”‚          â”‚
â”‚  â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚ğŸ“  â”‚          â”‚
â”‚  â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚å­¦ç”Ÿèµ›â”‚         â”‚
â”‚  â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚    â”‚ â”‚ğŸ‘¥12â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜          â”‚
â”‚  ...                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **æ—¥å†å•å…ƒæ ¼è®¾è®¡**

æ¯ä¸ªæ—¥æœŸå•å…ƒæ ¼åŒ…å«ï¼š
- **æ—¥æœŸæ•°å­—**ï¼ˆå¤§å·ï¼Œé¡¶éƒ¨ï¼‰
- **æ¯”èµ›/æ´»åŠ¨æ ‡è®°**ï¼ˆå›¾æ ‡ + åç§°ï¼‰
  - ğŸ† å‘¨èµ›ï¼ˆå‘¨å››ï¼‰
  - ğŸ“ å­¦ç”Ÿèµ›ï¼ˆå‘¨æ—¥ï¼‰
  - ğŸ‰ ç‰¹æ®Šæ´»åŠ¨ï¼ˆç®¡ç†å‘˜æ·»åŠ ï¼‰
- **æŠ¥åäººæ•°**ï¼ˆğŸ‘¥ æ•°å­—ï¼‰
- **çŠ¶æ€æŒ‡ç¤º**ï¼ˆå·²æŠ¥å/å·²æ»¡/å¯æŠ¥åï¼‰

**ç‚¹å‡»å•å…ƒæ ¼** â†’ æ‰“å¼€è¯¦æƒ…å¼¹çª—

---

## ğŸ¨ è¯¦æƒ…å¼¹çª—è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† Weekly Tournament - Thursday, Dec 5     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                             â”‚
â”‚  ğŸ“… Date: December 5, 2024                 â”‚
â”‚  â° Time: 7:00 PM                          â”‚
â”‚  ğŸ’° Entry Fee: $20                         â”‚
â”‚  ğŸ‘¥ Registered: 8                         â”‚
â”‚  ğŸ“Š Status: Registration Open              â”‚
â”‚  âœ… Tournament confirmed (8+ players)      â”‚
â”‚  (å¦‚æœäººæ•° < 8ï¼Œåˆ™æ˜¾ç¤º: âš ï¸ Minimum 8 players required)
â”‚  (å¦‚æœå·²å®Œæˆï¼Œåˆ™æ˜¾ç¤º: âœ… Completed)
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Participants List:                 â”‚   â”‚
â”‚  â”‚  1. John Doe âœ“ (You)               â”‚   â”‚
â”‚  â”‚  2. Jane Smith                     â”‚   â”‚
â”‚  â”‚  3. Bob Johnson                    â”‚   â”‚
â”‚  â”‚  ...                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  [Register]  [Cancel Registration]         â”‚
â”‚                                             â”‚
â”‚  [ç®¡ç†å‘˜ä¸“ç”¨]                               â”‚
â”‚  [âœ… Complete Tournament] [Edit] [Delete]  â”‚
â”‚                                             â”‚
â”‚  [Close]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **å®Œæˆæ¯”èµ›ç¡®è®¤å¯¹è¯æ¡†**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Complete Tournament?                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                             â”‚
â”‚  Are you sure you want to mark this        â”‚
â”‚  tournament as completed?                   â”‚
â”‚                                             â”‚
â”‚  Tournament: Weekly Tournament             â”‚
â”‚  Date: December 5, 2024                     â”‚
â”‚  Participants: 8                            â”‚
â”‚                                             â”‚
â”‚  âš ï¸ This action will:                      â”‚
â”‚  â€¢ Update status to "Completed"            â”‚
â”‚  â€¢ Sync to homepage statistics             â”‚
â”‚  â€¢ Cannot be undone easily                 â”‚
â”‚                                             â”‚
â”‚  [Cancel]  [Confirm Complete]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„ä¿®æ”¹

### **1. æ‰©å±• `tournaments` è¡¨**

æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š

```sql
ALTER TABLE tournaments ADD COLUMN IF NOT EXISTS 
  event_type VARCHAR(50) DEFAULT 'custom' CHECK (event_type IN ('weekly_pro', 'weekly_student', 'custom')),
  -- 'weekly_pro': æ¯å‘¨å››å‘¨èµ›ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
  -- 'weekly_student': æ¯å‘¨æ—¥å­¦ç”Ÿèµ›ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
  -- 'custom': ç®¡ç†å‘˜æ‰‹åŠ¨æ·»åŠ çš„æ´»åŠ¨

  is_recurring BOOLEAN DEFAULT false,
  -- æ˜¯å¦ä¸ºé‡å¤æ€§æ´»åŠ¨ï¼ˆå‘¨èµ›/å­¦ç”Ÿèµ›ï¼‰

  participant_category VARCHAR(20) DEFAULT 'adult' CHECK (participant_category IN ('adult', 'student')),
  -- 'adult': Proç»„ï¼ˆå‘¨èµ›ï¼‰
  -- 'student': Studentç»„ï¼ˆå­¦ç”Ÿèµ›ï¼‰

  auto_generated BOOLEAN DEFAULT false,
  -- æ˜¯å¦ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„æ´»åŠ¨

  min_players INTEGER DEFAULT 8;
  -- æœ€å°‘å¼€èµ›äººæ•°ï¼ˆé»˜è®¤8äººï¼‰
```

### **2. åˆ›å»ºè‡ªåŠ¨ç”Ÿæˆå‘¨èµ›çš„å‡½æ•°**

```sql
-- å‡½æ•°ï¼šè‡ªåŠ¨ç”Ÿæˆæœªæ¥3ä¸ªæœˆçš„å‘¨èµ›å’Œå­¦ç”Ÿèµ›
CREATE OR REPLACE FUNCTION generate_weekly_tournaments()
RETURNS void AS $$
DECLARE
  current_date DATE := CURRENT_DATE;
  end_date DATE := CURRENT_DATE + INTERVAL '3 months';
  check_date DATE;
  day_of_week INTEGER;
BEGIN
  check_date := current_date;
  
  WHILE check_date <= end_date LOOP
    day_of_week := EXTRACT(DOW FROM check_date);
    
    -- å‘¨å›› = 4 (PostgreSQL: 0=Sunday, 4=Thursday)
    IF day_of_week = 4 THEN
      -- æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨è¯¥æ—¥æœŸçš„å‘¨èµ›
      IF NOT EXISTS (
        SELECT 1 FROM tournaments 
        WHERE DATE(start_date) = check_date 
        AND event_type = 'weekly_pro'
      ) THEN
        INSERT INTO tournaments (
          name, 
          description, 
          tournament_type,
          start_date,
          participant_category,
          event_type,
          is_recurring,
          auto_generated,
          status,
          entry_fee,
          max_players
        ) VALUES (
          'Weekly Tournament - ' || TO_CHAR(check_date, 'Mon DD, YYYY'),
          'Weekly Pro Division Tournament (Minimum 8 players required)',
          'single_elimination',
          check_date::timestamp + TIME '19:00:00', -- 7 PM
          'adult',
          'weekly_pro',
          true,
          true,
          'registration',
          20,  -- é»˜è®¤æŠ¥åè´¹
          NULL -- ä¸é™åˆ¶æœ€å¤§äººæ•°
        );
      END IF;
    END IF;
    
    -- å‘¨æ—¥ = 0 (PostgreSQL: 0=Sunday)
    IF day_of_week = 0 THEN
      -- æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨è¯¥æ—¥æœŸçš„å­¦ç”Ÿèµ›
      IF NOT EXISTS (
        SELECT 1 FROM tournaments 
        WHERE DATE(start_date) = check_date 
        AND event_type = 'weekly_student'
      ) THEN
        INSERT INTO tournaments (
          name, 
          description, 
          tournament_type,
          start_date,
          participant_category,
          event_type,
          is_recurring,
          auto_generated,
          status,
          entry_fee,
          max_players
        ) VALUES (
          'Student Tournament - ' || TO_CHAR(check_date, 'Mon DD, YYYY'),
          'Weekly Student Division Tournament (Minimum 8 players required)',
          'single_elimination',
          check_date::timestamp + TIME '14:00:00', -- 2 PM
          'student',
          'weekly_student',
          true,
          true,
          'registration',
          20,  -- é»˜è®¤æŠ¥åè´¹
          NULL -- ä¸é™åˆ¶æœ€å¤§äººæ•°
        );
      END IF;
    END IF;
    
    check_date := check_date + INTERVAL '1 day';
  END LOOP;
END;
$$ LANGUAGE plpgsql;
```

### **3. åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼ˆå¯é€‰ï¼‰**

ä½¿ç”¨ Supabase Edge Functions æˆ– pg_cron æ‰©å±•ï¼Œæ¯å¤©è‡ªåŠ¨è¿è¡Œ `generate_weekly_tournaments()`ã€‚

---

## ğŸ”§ åŠŸèƒ½å®ç°

### **1. å‰ç«¯åŠŸèƒ½**

#### **A. æ—¥å†è§†å›¾ç»„ä»¶**
- ä½¿ç”¨ Vue 3 + æ—¥å†åº“ï¼ˆå¦‚ `vue-calendar` æˆ–è‡ªå®šä¹‰ï¼‰
- æŒ‰æœˆæ˜¾ç¤ºï¼Œæ”¯æŒå‰åç¿»é¡µ
- æ¯ä¸ªæ—¥æœŸå•å…ƒæ ¼æ˜¾ç¤ºï¼š
  - æ—¥æœŸæ•°å­—
  - è¯¥æ—¥æœŸçš„æ‰€æœ‰æ¯”èµ›/æ´»åŠ¨ï¼ˆå›¾æ ‡ + åç§°ï¼‰
  - æŠ¥åäººæ•°ï¼ˆğŸ‘¥ æ•°å­—ï¼‰
  - å½“å‰ç”¨æˆ·æ˜¯å¦å·²æŠ¥åï¼ˆâœ“ æ ‡è®°ï¼‰

#### **B. ç‚¹å‡»æ—¥æœŸå•å…ƒæ ¼**
- æ‰“å¼€è¯¦æƒ…å¼¹çª—
- æ˜¾ç¤ºè¯¥æ—¥æœŸçš„æ‰€æœ‰æ´»åŠ¨
- å¦‚æœåªæœ‰ä¸€ä¸ªæ´»åŠ¨ï¼Œç›´æ¥æ˜¾ç¤ºæ´»åŠ¨è¯¦æƒ…
- å¦‚æœæœ‰å¤šä¸ªæ´»åŠ¨ï¼Œæ˜¾ç¤ºæ´»åŠ¨åˆ—è¡¨ä¾›é€‰æ‹©

#### **C. æŠ¥å/å–æ¶ˆæŠ¥å**
- ç‚¹å‡» "Register" æŒ‰é’®
  - æ£€æŸ¥æ˜¯å¦å·²æŠ¥å
  - æ£€æŸ¥æ˜¯å¦å·²æ»¡å‘˜ï¼ˆå¦‚æœæœ‰ max_players é™åˆ¶ï¼‰
  - è°ƒç”¨ `tournament_registrations` è¡¨æ’å…¥è®°å½•
  - æ›´æ–° UIï¼ˆæŠ¥åäººæ•° +1ï¼Œæ˜¾ç¤º "Cancel" æŒ‰é’®ï¼‰
- ç‚¹å‡» "Cancel Registration" æŒ‰é’®
  - åˆ é™¤ `tournament_registrations` è®°å½•
  - æ›´æ–° UIï¼ˆæŠ¥åäººæ•° -1ï¼Œæ˜¾ç¤º "Register" æŒ‰é’®ï¼‰
- **æœ€å°‘äººæ•°æç¤º**ï¼š
  - å¦‚æœæŠ¥åäººæ•° < 8ï¼Œæ˜¾ç¤ºè­¦å‘Šï¼š"âš ï¸ Minimum 8 players required to start"
  - å¦‚æœæŠ¥åäººæ•° >= 8ï¼Œæ˜¾ç¤ºæˆåŠŸæç¤ºï¼š"âœ… Tournament confirmed (8+ players)"

#### **D. æŸ¥çœ‹æŠ¥ååå•**
- åœ¨è¯¦æƒ…å¼¹çª—ä¸­æ˜¾ç¤ºå·²æŠ¥åç”¨æˆ·åˆ—è¡¨
- æ˜¾ç¤ºç”¨æˆ·åï¼ˆä¸æ˜¾ç¤ºæ•æ„Ÿä¿¡æ¯å¦‚é‚®ç®±/ç”µè¯ï¼‰
- å½“å‰ç”¨æˆ·é«˜äº®æ˜¾ç¤º

#### **E. ç®¡ç†å‘˜åŠŸèƒ½**
- **æ·»åŠ æ´»åŠ¨**ï¼šç‚¹å‡» "+ Add Event" æŒ‰é’®
  - æ‰“å¼€è¡¨å•å¼¹çª—
  - é€‰æ‹©æ—¥æœŸã€æ—¶é—´ã€ç±»å‹ã€åç§°ã€æè¿°ç­‰
  - ä¿å­˜åˆ° `tournaments` è¡¨ï¼ˆ`event_type = 'custom'`ï¼‰
- **ç¼–è¾‘æ´»åŠ¨**ï¼šç‚¹å‡»æ´»åŠ¨è¯¦æƒ…ä¸­çš„ "Edit" æŒ‰é’®ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰
- **åˆ é™¤æ´»åŠ¨**ï¼šç‚¹å‡»æ´»åŠ¨è¯¦æƒ…ä¸­çš„ "Delete" æŒ‰é’®ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰
- **å®Œæˆæ¯”èµ›**ï¼šç‚¹å‡»æ´»åŠ¨è¯¦æƒ…ä¸­çš„ "âœ… Complete Tournament" æŒ‰é’®ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰
  - æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ï¼š"Are you sure you want to mark this tournament as completed?"
  - ç¡®è®¤åï¼Œæ›´æ–° `tournaments` è¡¨çš„ `status` å­—æ®µä¸º `'completed'`
  - æ›´æ–° `end_date` ä¸ºå½“å‰æ—¶é—´ï¼ˆå¦‚æœæœªè®¾ç½®ï¼‰
  - åˆ·æ–°æ—¥å†è§†å›¾ï¼Œå·²å®Œæˆçš„æ¯”èµ›æ˜¾ç¤ºä¸ºç°è‰²/å·²å®ŒæˆçŠ¶æ€
  - **åŒæ­¥åˆ°ä¸»é¡µ**ï¼šä¸»é¡µçš„ "Tournaments Held" ç»Ÿè®¡ä¼šè‡ªåŠ¨æ›´æ–°ï¼ˆåªç»Ÿè®¡ `status = 'completed'` çš„æ¯”èµ›ï¼‰
- **è‡ªåŠ¨ç”Ÿæˆå‘¨èµ›**ï¼šé¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è°ƒç”¨ `generate_weekly_tournaments()`

---

## ğŸ¨ è§†è§‰è®¾è®¡

### **é¢œè‰²æ–¹æ¡ˆ**
- **å‘¨èµ›ï¼ˆå‘¨å››ï¼‰**ï¼šç´«è‰²æ¸å˜èƒŒæ™¯ `#9C27B0 â†’ #673AB7`
- **å­¦ç”Ÿèµ›ï¼ˆå‘¨æ—¥ï¼‰**ï¼šç»¿è‰²æ¸å˜èƒŒæ™¯ `#10b981 â†’ #059669`
- **è‡ªå®šä¹‰æ´»åŠ¨**ï¼šè“è‰²æ¸å˜èƒŒæ™¯ `#3b82f6 â†’ #1d4ed8`
- **å·²æŠ¥å**ï¼šç»¿è‰²è¾¹æ¡† + âœ“ å›¾æ ‡
- **å·²æ»¡å‘˜**ï¼šçº¢è‰²è¾¹æ¡† + "FULL" æ ‡ç­¾
- **äººæ•°ä¸è¶³**ï¼šé»„è‰²è¾¹æ¡† + "âš ï¸ Need more players"ï¼ˆå½“æŠ¥åäººæ•° < 8 æ—¶ï¼‰
- **å·²å®Œæˆ**ï¼šç°è‰²èƒŒæ™¯ + "âœ… Completed" æ ‡ç­¾ï¼ˆ`status = 'completed'`ï¼‰

### **å“åº”å¼è®¾è®¡**
- **æ¡Œé¢ç«¯**ï¼š7åˆ—æ—¥å†ï¼Œå¤§å•å…ƒæ ¼
- **å¹³æ¿ç«¯**ï¼š7åˆ—æ—¥å†ï¼Œä¸­ç­‰å•å…ƒæ ¼
- **æ‰‹æœºç«¯**ï¼š7åˆ—æ—¥å†ï¼Œå°å•å…ƒæ ¼ï¼Œå¯æ¨ªå‘æ»šåŠ¨

---

## ğŸ” æƒé™æ§åˆ¶

### **æŸ¥çœ‹æƒé™**
- âœ… æ‰€æœ‰ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥æŸ¥çœ‹æ—¥å†å’Œæ´»åŠ¨è¯¦æƒ…
- âœ… æ‰€æœ‰ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥æŸ¥çœ‹æŠ¥åäººæ•°å’ŒæŠ¥ååå•

### **æ“ä½œæƒé™**
- âœ… æ‰€æœ‰ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥æŠ¥å/å–æ¶ˆæŠ¥å
- âŒ åªæœ‰ç®¡ç†å‘˜å¯ä»¥æ·»åŠ /ç¼–è¾‘/åˆ é™¤æ´»åŠ¨
- âŒ åªæœ‰ç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹è‡ªåŠ¨ç”Ÿæˆçš„å‘¨èµ›/å­¦ç”Ÿèµ›

### **æ•°æ®åº“ RLS ç­–ç•¥**
```sql
-- tournaments è¡¨ï¼šæ‰€æœ‰äººå¯è¯»ï¼Œä»…ç®¡ç†å‘˜å¯å†™
CREATE POLICY "Anyone can view tournaments"
  ON tournaments FOR SELECT
  USING (true);

CREATE POLICY "Only admins can insert tournaments"
  ON tournaments FOR INSERT
  WITH CHECK (
    EXISTS (
      SELECT 1 FROM users 
      WHERE id = auth.uid() 
      AND role = 'admin'
    )
  );

-- tournament_registrations è¡¨ï¼šæ‰€æœ‰äººå¯è¯»ï¼Œæ‰€æœ‰äººå¯æ’å…¥è‡ªå·±çš„æŠ¥å
CREATE POLICY "Anyone can view registrations"
  ON tournament_registrations FOR SELECT
  USING (true);

CREATE POLICY "Users can register themselves"
  ON tournament_registrations FOR INSERT
  WITH CHECK (user_id = auth.uid());

CREATE POLICY "Users can cancel their own registration"
  ON tournament_registrations FOR DELETE
  USING (user_id = auth.uid());
```

---

## ğŸ“‹ å®æ–½æ­¥éª¤

1. **æ•°æ®åº“è¿ç§»**
   - æ·»åŠ  `event_type`, `is_recurring`, `participant_category`, `auto_generated` å­—æ®µ
   - åˆ›å»º `generate_weekly_tournaments()` å‡½æ•°
   - æ›´æ–° RLS ç­–ç•¥

2. **å‰ç«¯é‡æ„**
   - åˆ›å»ºæ–°çš„æ—¥å†ç»„ä»¶
   - å®ç°æ—¥æœŸå•å…ƒæ ¼æ¸²æŸ“
   - å®ç°è¯¦æƒ…å¼¹çª—
   - å®ç°æŠ¥å/å–æ¶ˆæŠ¥ååŠŸèƒ½
   - å®ç°ç®¡ç†å‘˜æ·»åŠ /ç¼–è¾‘/åˆ é™¤åŠŸèƒ½

3. **è‡ªåŠ¨ç”Ÿæˆé€»è¾‘**
   - é¡µé¢åŠ è½½æ—¶è°ƒç”¨ `generate_weekly_tournaments()`
   - æˆ–ä½¿ç”¨ Supabase Edge Function å®šæ—¶æ‰§è¡Œ

4. **æµ‹è¯•**
   - æµ‹è¯•æ—¥å†æ˜¾ç¤º
   - æµ‹è¯•æŠ¥å/å–æ¶ˆæŠ¥å
   - æµ‹è¯•ç®¡ç†å‘˜åŠŸèƒ½
   - æµ‹è¯•è‡ªåŠ¨ç”Ÿæˆå‘¨èµ›/å­¦ç”Ÿèµ›

---

## âœ… éªŒæ”¶æ ‡å‡†

- [ ] æ—¥å†è§†å›¾æ¸…æ™°æ˜¾ç¤ºæ¯å¤©çš„æ¯”èµ›å’Œæ´»åŠ¨
- [ ] æ¯å‘¨å››è‡ªåŠ¨æ˜¾ç¤ºå‘¨èµ›
- [ ] æ¯å‘¨æ—¥è‡ªåŠ¨æ˜¾ç¤ºå­¦ç”Ÿèµ›
- [ ] é€‰æ‰‹å¯ä»¥ç‚¹å‡»æ—¥æœŸæŸ¥çœ‹è¯¦æƒ…
- [ ] é€‰æ‰‹å¯ä»¥æŠ¥å/å–æ¶ˆæŠ¥å
- [ ] é€‰æ‰‹å¯ä»¥æŸ¥çœ‹æŠ¥åäººæ•°å’ŒæŠ¥ååå•
- [ ] åªæœ‰ç®¡ç†å‘˜å¯ä»¥æ·»åŠ /ç¼–è¾‘/åˆ é™¤æ´»åŠ¨
- [ ] ç®¡ç†å‘˜å¯ä»¥å®Œæˆæ¯”èµ›ï¼ŒåŒæ­¥åˆ°ä¸»é¡µç»Ÿè®¡
- [ ] ä¸»é¡µåªç»Ÿè®¡å·²å®Œæˆçš„æ¯”èµ›ï¼ˆ`status = 'completed'`ï¼‰
- [ ] å“åº”å¼è®¾è®¡ï¼Œæ‰‹æœºç«¯å¯ç”¨
- [ ] è‡ªåŠ¨ç”Ÿæˆæœªæ¥3ä¸ªæœˆçš„å‘¨èµ›å’Œå­¦ç”Ÿèµ›

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

**ç”¨æˆ·ä½“éªŒæå‡ï¼š**
- âœ… ä¸€ç›®äº†ç„¶ï¼šä¸€çœ¼çœ‹åˆ°æ•´ä¸ªæœˆçš„æ¯”èµ›å®‰æ’
- âœ… å¿«é€Ÿæ“ä½œï¼šç‚¹å‡»æ—¥æœŸå³å¯æŠ¥åï¼Œæ— éœ€è·³è½¬é¡µé¢
- âœ… ä¿¡æ¯é€æ˜ï¼šæ¸…æ¥šçœ‹åˆ°æœ‰å¤šå°‘äººæŠ¥åï¼Œè°æŠ¥åäº†
- âœ… è‡ªåŠ¨åŒ–ï¼šå‘¨èµ›å’Œå­¦ç”Ÿèµ›è‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€æ‰‹åŠ¨æ·»åŠ 

**ç®¡ç†å‘˜æ•ˆç‡æå‡ï¼š**
- âœ… å‡å°‘é‡å¤å·¥ä½œï¼šå‘¨èµ›å’Œå­¦ç”Ÿèµ›è‡ªåŠ¨ç”Ÿæˆ
- âœ… çµæ´»ç®¡ç†ï¼šå¯ä»¥æ·»åŠ ç‰¹æ®Šæ´»åŠ¨ï¼ˆå¦‚èŠ‚æ—¥æ¯”èµ›ã€å¤§å‹èµ›äº‹ï¼‰
- âœ… ç»Ÿä¸€ç®¡ç†ï¼šæ‰€æœ‰æ´»åŠ¨åœ¨ä¸€ä¸ªæ—¥å†è§†å›¾ä¸­
- âœ… ä¸€é”®å®Œæˆï¼šæ¯”èµ›ç»“æŸåä¸€é”®æ ‡è®°å®Œæˆï¼Œè‡ªåŠ¨åŒæ­¥åˆ°ä¸»é¡µç»Ÿè®¡

**æ•°æ®å‡†ç¡®æ€§æå‡ï¼š**
- âœ… ä¸»é¡µç»Ÿè®¡åªæ˜¾ç¤ºçœŸæ­£å®Œæˆçš„æ¯”èµ›
- âœ… å®æ—¶åŒæ­¥ï¼Œæ— éœ€æ‰‹åŠ¨æ›´æ–°
- âœ… é¿å…ç»Ÿè®¡æœªå¼€å§‹æˆ–å·²å–æ¶ˆçš„æ¯”èµ›

---

## ğŸ  ä¸»é¡µç»Ÿè®¡é€»è¾‘ä¿®æ”¹

### **ä¿®æ”¹å†…å®¹**

ä¸»é¡µçš„ "Tournaments Held" ç»Ÿè®¡å°†**åªç»Ÿè®¡å·²å®Œæˆ**çš„æ¯”èµ›ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æ¯”èµ›ã€‚

### **å®ç°æ–¹å¼**

1. **ä¿®æ”¹ `src/stores/statsStore.js`**
   ```javascript
   // ä¿®æ”¹å‰ï¼š
   supabase.from('tournaments').select('id', { count: 'exact', head: true })
   
   // ä¿®æ”¹åï¼š
   supabase.from('tournaments')
     .select('id', { count: 'exact', head: true })
     .eq('status', 'completed')  // åªç»Ÿè®¡å·²å®Œæˆçš„æ¯”èµ›
   ```

2. **å®Œæˆæ¯”èµ›æµç¨‹**
   - ç®¡ç†å‘˜åœ¨æ—¥å†è¯¦æƒ…å¼¹çª—ä¸­ç‚¹å‡» "âœ… Complete Tournament"
   - ç¡®è®¤åï¼Œæ¯”èµ›çŠ¶æ€æ›´æ–°ä¸º `status = 'completed'`
   - ä¸»é¡µç»Ÿè®¡è‡ªåŠ¨æ›´æ–°ï¼ˆæ¯30ç§’åˆ·æ–°ä¸€æ¬¡ï¼‰

### **æ•°æ®åŒæ­¥**

- âœ… å®æ—¶åŒæ­¥ï¼šä¸»é¡µæ¯30ç§’è‡ªåŠ¨åˆ·æ–°ç»Ÿè®¡æ•°æ®
- âœ… å³æ—¶æ›´æ–°ï¼šç®¡ç†å‘˜å®Œæˆæ¯”èµ›åï¼Œä¸»é¡µç»Ÿè®¡ç«‹å³æ›´æ–°
- âœ… å‡†ç¡®ç»Ÿè®¡ï¼šåªç»Ÿè®¡çœŸæ­£å®Œæˆçš„æ¯”èµ›ï¼Œä¸åŒ…æ‹¬å·²å–æ¶ˆæˆ–æœªå¼€å§‹çš„æ¯”èµ›

### **çŠ¶æ€è¯´æ˜**

æ¯”èµ›çŠ¶æ€ (`status`) å­—æ®µï¼š
- `'upcoming'` - å³å°†å¼€å§‹ï¼ˆä¸ç»Ÿè®¡ï¼‰
- `'registration'` - æŠ¥åä¸­ï¼ˆä¸ç»Ÿè®¡ï¼‰
- `'in_progress'` - è¿›è¡Œä¸­ï¼ˆä¸ç»Ÿè®¡ï¼‰
- `'completed'` - å·²å®Œæˆï¼ˆ**ç»Ÿè®¡**ï¼‰
- `'cancelled'` - å·²å–æ¶ˆï¼ˆä¸ç»Ÿè®¡ï¼‰

---

## ğŸ“ å¤‡æ³¨

- è‡ªåŠ¨ç”Ÿæˆçš„å‘¨èµ›å’Œå­¦ç”Ÿèµ›å¯ä»¥è®¾ç½®é»˜è®¤çš„æŠ¥åè´¹ã€æœ€å°‘äººæ•°ç­‰
- æœ€å°‘8äººå¼€èµ›ï¼šå¦‚æœæŠ¥åäººæ•°ä¸è¶³8äººï¼Œæ¯”èµ›å¯èƒ½è¢«å–æ¶ˆæˆ–å»¶æœŸ
- ç®¡ç†å‘˜å¯ä»¥ç¼–è¾‘è‡ªåŠ¨ç”Ÿæˆçš„æ´»åŠ¨ï¼ˆä¿®æ”¹æ—¶é—´ã€è´¹ç”¨ç­‰ï¼‰ï¼Œä½† `auto_generated` æ ‡è®°ä¼šä¿ç•™
- å¦‚æœæŸä¸ªå‘¨å››/å‘¨æ—¥ä¸æƒ³ä¸¾åŠæ¯”èµ›ï¼Œç®¡ç†å‘˜å¯ä»¥åˆ é™¤è¯¥æ´»åŠ¨
- å»ºè®®ä¿ç•™æ—§çš„æ•°æ®ç»“æ„ï¼Œæ–°å­—æ®µä½¿ç”¨é»˜è®¤å€¼ï¼Œç¡®ä¿å‘åå…¼å®¹

