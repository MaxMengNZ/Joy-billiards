# 🧹 重复用户清理报告

**问题：** 比赛参赛者显示 0 胜 0 负  
**原因：** 有重复的用户账号，比赛关联到旧账号  
**状态：** ✅ 已修复

---

## 🔍 发现的重复用户

### 1. Micah Cielo Torlao Duran（2个账号）
| ID | 邮箱 | 战绩 | 积分 | 状态 |
|----|------|------|------|------|
| ae6e95e2... | mctorlao@yahoo.com | 0W-0L | 0 | ❌ 已停用 |
| 351224fa... | cecille.duran7@gmail.com | 14W-5L | 20 | ✅ 使用中 |

**操作：**
- ✅ 旧账号报名转移到新账号
- ✅ 旧账号已停用

---

### 2. Yaocheng Wang（2个账号）
| ID | 战绩 | 积分 | 状态 |
|----|------|------|------|
| ea916a26... | 0W-0L | 0 | ❌ 已停用 |
| 5c5e3dcb... | 3W-6L | 6 | ✅ 使用中 |

**操作：**
- ✅ 旧账号报名转移到新账号
- ✅ 旧账号已停用

---

### 3. Fernando Cortez（2个账号）
**状态：** 检测到重复，待处理

---

## ✅ 修复执行

### 步骤 1：转移比赛报名
```sql
-- 将旧账号的报名转移到新账号
UPDATE tournament_registrations
SET user_id = '新账号ID'
WHERE user_id = '旧账号ID';
```

### 步骤 2：停用旧账号
```sql
-- 停用重复的旧账号
UPDATE users
SET is_active = false
WHERE id = '旧账号ID';
```

---

## 📊 学生赛参赛者（修复后）

| 姓名 | 胜场 | 负场 | 段位积分 | 状态 |
|------|------|------|----------|------|
| Micah Cielo Torlao Duran | **14** | 5 | 20 | ✅ 正确 |
| Zeyu Shen | **14** | 6 | 10 | ✅ 正确 |
| Owen | **8** | 6 | 10 | ✅ 正确 |
| Shangze Jiang | 0 | 6 | 6 | ✅ 正确 |
| Yaocheng Wang | **3** | 6 | 6 | ✅ 正确 |
| Jiayu Li | **3** | 8 | 6 | ✅ 正确 |
| Summer Patnugot | **4** | 6 | 6 | ✅ 正确 |
| ZESHENG LIU | **2** | 6 | 3 | ✅ 正确 |
| 李相融 | **5** | 6 | 3 | ✅ 正确 |

**所有数据已同步！** ✅

---

## 🎯 刷新浏览器

访问学生赛页面，应该能看到正确的战绩了！

---

## ⚠️ 预防重复账号

### 原因分析：
可能是：
1. 用户用不同邮箱注册了多次
2. 管理员手动创建了重复的记录

### 建议：
1. 定期检查重复用户
2. 注册时提示已存在相同姓名
3. 使用邮箱作为唯一标识

---

## 🧹 如何查找重复用户

```sql
-- 查找相同姓名的重复用户
SELECT 
  name,
  COUNT(*) as 重复次数,
  STRING_AGG(email, ', ') as 邮箱列表
FROM users
WHERE is_active = true
GROUP BY name
HAVING COUNT(*) > 1;
```

---

**刷新比赛页面，数据应该正确显示了！** ✅


