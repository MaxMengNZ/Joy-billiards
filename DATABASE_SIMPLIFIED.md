# ğŸ‰ æ•°æ®åº“ç®€åŒ–å®Œæˆï¼

## âœ… ç®€åŒ–ç»“æœ

ä» **5ä¸ªè¡¨** ç®€åŒ–ä¸º **3ä¸ªè¡¨**

---

## ğŸ“Š æ–°çš„æ•°æ®åº“ç»“æ„

### 1. **users** (4æ¡æ•°æ®)
ç»Ÿä¸€çš„ç”¨æˆ·è¡¨ï¼Œåˆå¹¶äº† players + user_profiles

**å­—æ®µï¼š**
- `id` - UUID ä¸»é”®
- `name` - å§“å
- `email` - é‚®ç®± (å”¯ä¸€)
- `phone` - ç”µè¯
- `skill_level` - æŠ€èƒ½ç­‰çº§ (beginner/intermediate/advanced/professional)
- `role` - è§’è‰² (admin/player)
- `wins` - èƒœåœº
- `losses` - è´Ÿåœº
- `is_active` - æ¿€æ´»çŠ¶æ€
- `auth_id` - å…³è”åˆ° auth.users (ç™»å½•è®¤è¯)
- `created_at`, `updated_at` - æ—¶é—´æˆ³

**åŠŸèƒ½ï¼š**
- âœ… å­˜å‚¨ç©å®¶ä¿¡æ¯
- âœ… å­˜å‚¨è®¤è¯ä¿¡æ¯
- âœ… ç®¡ç†è§’è‰²æƒé™
- âœ… è·Ÿè¸ªèƒœè´Ÿè®°å½•

---

### 2. **tournaments** (1æ¡æ•°æ®)
æ¯”èµ›ä¿¡æ¯è¡¨

**å­—æ®µï¼š**
- `id` - UUID ä¸»é”®
- `name` - æ¯”èµ›åç§°
- `description` - æè¿°
- `tournament_type` - æ¯”èµ›ç±»å‹
- `start_date`, `end_date` - å¼€å§‹/ç»“æŸæ—¶é—´
- `max_players` - æœ€å¤§äººæ•°
- `entry_fee` - æŠ¥åè´¹
- `prize_pool` - å¥–é‡‘æ± 
- `status` - çŠ¶æ€ (upcoming/registration/in_progress/completed/cancelled)
- `created_at`, `updated_at` - æ—¶é—´æˆ³

---

### 3. **matches** (0æ¡æ•°æ®)
å¯¹æˆ˜è®°å½•è¡¨

**å­—æ®µï¼š**
- `id` - UUID ä¸»é”®
- `tournament_id` - å…³è”æ¯”èµ›
- `player1_id`, `player2_id` - å¯¹æˆ˜åŒæ–¹ (å…³è” users)
- `winner_id` - èƒœè€… (å…³è” users)
- `round_number` - è½®æ¬¡
- `match_number` - åœºæ¬¡
- `player1_score`, `player2_score` - æ¯”åˆ†
- `scheduled_time`, `completed_time` - æ—¶é—´
- `status` - çŠ¶æ€
- `table_number` - å°æ¡Œå·
- `notes` - å¤‡æ³¨
- `created_at`, `updated_at` - æ—¶é—´æˆ³

---

## âŒ å·²åˆ é™¤çš„è¡¨

1. **tournament_participants** 
   - åŸå› ï¼šä¸éœ€è¦å•ç‹¬çš„å‚ä¸è€…è¡¨
   - æ›¿ä»£ï¼šé€šè¿‡ matches è¡¨è‡ªåŠ¨è¯†åˆ«å‚ä¸è€…

2. **user_profiles**
   - åŸå› ï¼šå·²åˆå¹¶åˆ° users è¡¨
   - æ›¿ä»£ï¼šusers è¡¨åŒ…å«æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯

3. **players**
   - åŸå› ï¼šå·²åˆå¹¶åˆ° users è¡¨
   - æ›¿ä»£ï¼šusers è¡¨åŒæ—¶æ˜¯ç©å®¶è¡¨å’Œè®¤è¯è¡¨

---

## ğŸ”„ åŠŸèƒ½å˜åŒ–

### âœ… ä¿æŒä¸å˜çš„åŠŸèƒ½
- ç©å®¶ç®¡ç†ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- æ¯”èµ›ç®¡ç†
- å¯¹æˆ˜è®°å½•ç®¡ç†
- ç”¨æˆ·è®¤è¯å’Œç™»å½•
- è§’è‰²æƒé™æ§åˆ¶
- èƒœè´Ÿç»Ÿè®¡

### ğŸ“ è°ƒæ•´çš„åŠŸèƒ½

#### **å‚ä¸è€…ç®¡ç†**
**ä¹‹å‰ï¼š** 
- å•ç‹¬çš„ tournament_participants è¡¨
- æ‰‹åŠ¨æ·»åŠ /åˆ é™¤å‚ä¸è€…

**ç°åœ¨ï¼š**
- é€šè¿‡åˆ›å»º matches è‡ªåŠ¨è¯†åˆ«å‚ä¸è€…
- æŸ¥çœ‹å‚ä¸è€…åˆ—è¡¨ä¼šæ˜¾ç¤ºæ‰€æœ‰åœ¨æ¯”èµ›ä¸­æœ‰å¯¹æˆ˜è®°å½•çš„ç©å®¶

**ä¼˜ç‚¹ï¼š**
- æ›´ç®€å•ç›´è§‚
- å‡å°‘æ•°æ®å†—ä½™
- å‚ä¸è€…è‡ªåŠ¨ç®¡ç†

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### åˆ›å»ºæ¯”èµ›å‚ä¸è€…çš„æ–°æ–¹å¼

**ä¸éœ€è¦å•ç‹¬"æ·»åŠ å‚ä¸è€…"ï¼Œç›´æ¥åˆ›å»ºå¯¹æˆ˜ï¼š**

1. è¿›å…¥æ¯”èµ›è¯¦æƒ…é¡µ
2. ç‚¹å‡» "Schedule Match"ï¼ˆå®‰æ’å¯¹æˆ˜ï¼‰
3. é€‰æ‹© Player 1 å’Œ Player 2
4. åˆ›å»ºå¯¹æˆ˜
5. ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«è¿™ä¸¤ä¸ªç©å®¶ä¸ºå‚ä¸è€…

### æŸ¥çœ‹å‚ä¸è€…

å‚ä¸è€…åˆ—è¡¨ä¼šè‡ªåŠ¨æ˜¾ç¤ºæ‰€æœ‰åœ¨è¯¥æ¯”èµ›ä¸­æœ‰å¯¹æˆ˜è®°å½•çš„ç©å®¶ã€‚

---

## ğŸ“Š æ•°æ®ä¿ç•™

### âœ… å·²è¿ç§»çš„æ•°æ®

æ‰€æœ‰åŸæœ‰çš„ 4 ä¸ªç¤ºä¾‹ç©å®¶éƒ½å·²è¿ç§»åˆ° users è¡¨ï¼š
- John Smith (Advanced)
- Sarah Johnson (Intermediate)
- Michael Chen (Professional)
- Emma Wilson (Beginner)

æ‰€æœ‰æ•°æ®å®Œæ•´ä¿ç•™ï¼š
- âœ… å§“åã€é‚®ç®±ã€ç”µè¯
- âœ… æŠ€èƒ½ç­‰çº§
- âœ… èƒœè´Ÿè®°å½•
- âœ… åˆ›å»ºæ—¶é—´

---

## ğŸ” è®¤è¯ç³»ç»Ÿ

### ç”¨æˆ·æ³¨å†Œæµç¨‹

1. ç”¨æˆ·åœ¨ `/register` é¡µé¢æ³¨å†Œ
2. Supabase Auth åˆ›å»ºè®¤è¯è®°å½•
3. è§¦å‘å™¨è‡ªåŠ¨åœ¨ `users` è¡¨åˆ›å»ºç”¨æˆ·æ¡£æ¡ˆ
4. ç”¨æˆ·æ¡£æ¡ˆåŒ…å«è§’è‰²ï¼ˆé»˜è®¤ playerï¼‰

### ç™»å½•æµç¨‹

1. ç”¨æˆ·åœ¨ `/login` ç™»å½•
2. Supabase Auth éªŒè¯å‡­è¯
3. ç³»ç»Ÿé€šè¿‡ `auth_id` æŸ¥æ‰¾ `users` è¡¨
4. åŠ è½½ç”¨æˆ·æ¡£æ¡ˆå’Œè§’è‰²ä¿¡æ¯

---

## ğŸ¨ å‰ç«¯ä»£ç æ›´æ–°

### å·²è‡ªåŠ¨æ›´æ–°çš„æ–‡ä»¶

1. **src/stores/playerStore.js**
   - âœ… `players` è¡¨ â†’ `users` è¡¨
   - âœ… æ‰€æœ‰ CRUD æ“ä½œå·²æ›´æ–°

2. **src/stores/authStore.js**
   - âœ… `user_profiles` è¡¨ â†’ `users` è¡¨
   - âœ… æŸ¥è¯¢æ¡ä»¶ï¼š`id` â†’ `auth_id`

3. **src/stores/tournamentStore.js**
   - âœ… å‚ä¸è€…é€šè¿‡ `matches` æŸ¥è¯¢
   - âœ… è‡ªåŠ¨å»é‡å’Œç»„ç»‡æ•°æ®

---

## ğŸ’¡ ç®€åŒ–çš„å¥½å¤„

### 1. **æ›´ç®€å•**
- 3ä¸ªè¡¨ vs 5ä¸ªè¡¨
- å°‘äº†40%çš„è¡¨
- æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤

### 2. **æ›´æ¸…æ™°**
- ç”¨æˆ·å°±æ˜¯ç©å®¶
- å‚ä¸è€…å°±æ˜¯æœ‰å¯¹æˆ˜è®°å½•çš„ç©å®¶
- å‡å°‘æ¦‚å¿µæ··æ·†

### 3. **æ›´é«˜æ•ˆ**
- å‡å°‘è¡¨JOINæ“ä½œ
- å‡å°‘æ•°æ®å†—ä½™
- æ›´å¿«çš„æŸ¥è¯¢é€Ÿåº¦

### 4. **æ›´çµæ´»**
- ç”¨æˆ·å¯ä»¥æ—¢æ˜¯ç©å®¶åˆæ˜¯ç®¡ç†å‘˜
- å‚ä¸è€…è‡ªåŠ¨ç®¡ç†
- ä¸éœ€è¦æ‰‹åŠ¨ç»´æŠ¤å…³è”

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### è¯·æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š

#### ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- [ ] æ³¨å†Œæ–°ç”¨æˆ·ï¼ˆç©å®¶è§’è‰²ï¼‰
- [ ] ç™»å½•æˆåŠŸ
- [ ] æŸ¥çœ‹ç”¨æˆ·æ¡£æ¡ˆ

#### ç©å®¶ç®¡ç†
- [ ] æŸ¥çœ‹æ‰€æœ‰ç©å®¶ï¼ˆ/playersï¼‰
- [ ] åˆ›å»ºæ–°ç©å®¶
- [ ] ç¼–è¾‘ç©å®¶ä¿¡æ¯
- [ ] åˆ é™¤ç©å®¶

#### æ¯”èµ›ç®¡ç†
- [ ] åˆ›å»ºæ¯”èµ›
- [ ] æŸ¥çœ‹æ¯”èµ›åˆ—è¡¨
- [ ] ç¼–è¾‘æ¯”èµ›
- [ ] è¿›å…¥æ¯”èµ›è¯¦æƒ…

#### å¯¹æˆ˜ç®¡ç†
- [ ] åœ¨æ¯”èµ›ä¸­åˆ›å»ºå¯¹æˆ˜
- [ ] æŸ¥çœ‹å‚ä¸è€…åˆ—è¡¨ï¼ˆåº”è‡ªåŠ¨æ˜¾ç¤ºï¼‰
- [ ] æ›´æ–°å¯¹æˆ˜ç»“æœ
- [ ] æŸ¥çœ‹å¯¹æˆ˜å†å²

---

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœéœ€è¦æ¢å¤æ—§ç»“æ„ï¼Œå¯ä»¥ï¼š

1. è¿è¡Œ `supabase-migration.sql`ï¼ˆåŸå§‹è¿ç§»ï¼‰
2. é‡æ–°åˆ›å»º 5 ä¸ªè¡¨
3. ä» `users` è¡¨å¯¼å‡ºæ•°æ®
4. åˆ†åˆ«å¯¼å…¥åˆ° `players` å’Œ `user_profiles`

ä½†å»ºè®®ä½¿ç”¨æ–°çš„ç®€åŒ–ç»“æ„ï¼Œå› ä¸ºå®ƒæ›´ç®€å•å’Œé«˜æ•ˆã€‚

---

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°
2. æŸ¥çœ‹ Supabase æ—¥å¿—
3. éªŒè¯æ•°æ®åº“è¿æ¥çŠ¶æ€
4. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„ä½¿ç”¨æŒ‡å—

---

## âœ… æ€»ç»“

```
ä¹‹å‰ï¼š5ä¸ªè¡¨
- players
- tournaments
- tournament_participants
- matches  
- user_profiles

ç°åœ¨ï¼š3ä¸ªè¡¨
- users (åˆå¹¶ players + user_profiles)
- tournaments
- matches

åˆ é™¤ï¼štournament_participants (é€šè¿‡ matches æ¨æ–­)

ç»“æœï¼šæ›´ç®€å•ã€æ›´æ¸…æ™°ã€æ›´é«˜æ•ˆï¼
```

---

**æ•°æ®åº“ç®€åŒ–å®Œæˆï¼ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ªï¼** ğŸ‰

*åˆ›å»ºæ—¶é—´ï¼š2025-10-10*
*çŠ¶æ€ï¼šå·²å®Œæˆå¹¶æµ‹è¯•*

